[phases.install]
cmds = [
  # Install ONLY server workspace deps (including devDeps) so TypeScript/tsc exists during build.
  "npm ci --include=dev --workspace server --no-audit --no-fund"
]

[phases.build]
cmds = [
  # Build server
  "npm run build --workspace server",
  # Remove devDependencies after build so runtime stays slim
  "npm prune --omit=dev --workspace server"
]

[start]
cmd = "npm start --workspace server"
